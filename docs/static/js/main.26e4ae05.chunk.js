(this["webpackJsonpstar-wars-fans"]=this["webpackJsonpstar-wars-fans"]||[]).push([[0],{13:function(e,t,r){e.exports={auth:"Auth_auth__YvoUH",form:"Auth_form__3usXW",control:"Auth_control__1u-GZ",actions:"Auth_actions__pKq8Z"}},43:function(e,t,r){},44:function(e,t,r){"use strict";r.r(t);var c=r(1),n=r.n(c),a=r(23),s=r.n(a),i=r(3),o=r(2),l=r(4),u=r(16),j=r(10),d=function(){var e=localStorage.getItem("currentUser");if(e){var t=localStorage.getItem(e);return t=JSON.parse(t),{user:{userIsLogged:!0,userName:e},progress:{status:"idle",message:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d",code:200},favorites:t.favorites,history:t.history}}return{user:{userIsLogged:!1,userName:""},progress:{status:"idle",message:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d",code:204},favorites:{films:[],people:[],planets:[]},history:{films:[],people:[],planets:[]}}}(),b=Object(j.c)({name:"auth",initialState:d,reducers:{loading:function(e){e.progress.status="loading"},idle:function(e){e.progress.status="idle"},validationProgress:function(e,t){e.progress.message=t.payload.message,e.progress.code=t.payload.code,e.progress.status=t.payload.status},logInUser:function(e,t){e.user.userName=t.payload.login,e.user.userIsLogged=!0},logOutUser:function(e){e.user.userName="",e.user.userIsLogged=!1},addToFavorites:function(e,t){var r;(r=e.favorites[t.payload.type]).push.apply(r,Object(u.a)(t.payload.itemObj))},addToHistory:function(e,t){var r;(r=e.history[t.payload.type]).push.apply(r,Object(u.a)(t.payload.queryObj))},removeFromFavorites:function(e,t){e.favorites[t.payload.type].splice(t.payload.index,1)},removeFromHistory:function(e,t){e.history[t.payload.type].splice(t.payload.index,1)},clearFavoritesState:function(e){e.favorites.films=[],e.favorites.people=[],e.favorites.planets=[]},clearHistoryState:function(e){e.history.films=[],e.history.people=[],e.history.planets=[]}}});var p=b.actions,h=p.loading,f=p.idle,O=p.validationProgress,m=p.logInUser,x=p.logOutUser,v=p.addToFavorites,g=p.removeFromFavorites,y=p.clearFavoritesState,N=p.addToHistory,k=(p.removeFromHistory,p.clearHistoryState),S=b.reducer;function w(e,t,r){return function(c){if(c(h()),!e.trim()||!t){var n="\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b";return c(O({message:n,code:400,status:"idle"})),r(n)}var a=localStorage.getItem(e);if(a&&(a=JSON.parse(a)),!a||a.pass!==t){var s="\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435";return c(O({message:s,code:400,status:"idle"})),r(s)}localStorage.setItem("currentUser",e),c(function(e){var t=e.films,r=e.people,c=e.planets;return function(e){e(v({type:"films",itemObj:t})),e(v({type:"people",itemObj:r})),e(v({type:"planets",itemObj:c}))}}(a.favorites)),c(function(e){var t=e.films,r=e.people,c=e.planets;return function(e){e(N({type:"films",queryObj:t})),e(N({type:"people",queryObj:r})),e(N({type:"planets",queryObj:c}))}}(a.history));var i="\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d";c(m({login:e})),c(O({message:i,code:200,status:"idle"})),r(i)}}var I=r(0);function C(e){var t=e.userName,r=Object(o.b)();return Object(I.jsx)("nav",{className:"header",children:Object(I.jsxs)("ul",{children:[Object(I.jsx)("li",{children:Object(I.jsx)(i.b,{to:"/",style:{padding:"0.1rem 0.1rem",color:"black",border:"solid"},children:t})}),Object(I.jsx)("li",{children:Object(I.jsx)(i.b,{to:"/catalog/films",children:"\u0424\u0438\u043b\u044c\u043c\u044b"})}),Object(I.jsx)("li",{children:Object(I.jsx)(i.b,{to:"/catalog/people",children:"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0438"})}),Object(I.jsx)("li",{children:Object(I.jsx)(i.b,{to:"/catalog/planets",children:"\u041f\u043b\u0430\u043d\u0435\u0442\u044b"})}),Object(I.jsx)("li",{children:Object(I.jsx)(i.b,{to:"/favorites",children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"})}),Object(I.jsx)("li",{children:Object(I.jsx)(i.b,{to:"/history",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f"})}),Object(I.jsx)("li",{onClick:function(){return r((function(e){e(h()),localStorage.removeItem("currentUser"),e(x()),e(y()),e(k()),e(O({message:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d",code:204,status:"idle"}))}))},children:Object(I.jsx)(i.b,{to:"/signin",style:{color:"darkbrown"},children:"\u0412\u044b\u0445\u043e\u0434"})})]})})}function F(){return Object(I.jsx)("nav",{className:"header",children:Object(I.jsxs)("ul",{children:[Object(I.jsx)("li",{children:Object(I.jsx)(i.b,{to:"/",style:{padding:"0.1rem 0.1rem",color:"black",border:"solid"},children:"Star Wars Fans"})}),Object(I.jsx)("li",{children:Object(I.jsx)(i.b,{to:"/signin",children:"\u0412\u0445\u043e\u0434"})}),Object(I.jsx)("li",{children:Object(I.jsx)(i.b,{to:"/signup",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})]})})}var H=r(6);function L(e){var t=Object(c.useState)(e),r=Object(H.a)(t,2),n=r[0],a=r[1];return[n,function(e){a(e.target.value)},function(){a("")}]}var q=r(13);function _(){var e=L(""),t=Object(H.a)(e,3),r=t[0],n=t[1],a=t[2],s=L(""),l=Object(H.a)(s,3),u=l[0],j=l[1],d=l[2],b=Object(c.useState)(""),p=Object(H.a)(b,2),h=p[0],f=p[1],O=Object(c.useState)(!1),m=Object(H.a)(O,2),x=m[0],v=m[1],g=Object(o.b)();return Object(I.jsxs)("div",{className:"body",children:[Object(I.jsx)("div",{className:"auth-card",children:Object(I.jsxs)("div",{className:q.auth,children:[h&&Object(I.jsx)("p",{children:h}),Object(I.jsx)("h2",{children:"\u0412\u0445\u043e\u0434"}),Object(I.jsxs)("form",{className:q.form,onSubmit:function(e){e.preventDefault(),v(!0),g(w(r,u,f)),a(),d(),v(!1)},children:[Object(I.jsxs)("div",{className:q.control,children:[Object(I.jsx)("label",{htmlFor:"login",children:"\u041b\u043e\u0433\u0438\u043d"}),Object(I.jsx)("input",{type:"text",required:!0,value:r,onChange:n,id:"login"})]}),Object(I.jsxs)("div",{className:q.control,children:[Object(I.jsx)("label",{htmlFor:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(I.jsx)("input",{type:"password",required:!0,value:u,onChange:j,id:"password"})]}),Object(I.jsx)("div",{className:q.actions,children:Object(I.jsx)("button",{disabled:x,children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})}),Object(I.jsxs)("p",{style:{textAlign:"center",fontWeight:"bold"},children:["\u041d\u0443\u0436\u0435\u043d \u0430\u043a\u043a\u0430\u0443\u043d\u0442?",Object(I.jsx)(i.b,{to:"signup",style:{color:"darkblue",fontWeight:"bold"},children:"\xa0\xa0\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})]})}function E(){var e=L(""),t=Object(H.a)(e,3),r=t[0],n=t[1],a=t[2],s=L(""),l=Object(H.a)(s,3),u=l[0],j=l[1],d=l[2],b=L(""),p=Object(H.a)(b,3),f=p[0],x=p[1],v=p[2],g=Object(c.useState)(""),y=Object(H.a)(g,2),N=y[0],k=y[1],S=Object(c.useState)(!1),w=Object(H.a)(S,2),C=w[0],F=w[1],_=Object(o.b)();return Object(I.jsxs)("div",{className:"body",children:[Object(I.jsx)("div",{className:"auth-card",children:Object(I.jsxs)("div",{className:q.auth,children:[N&&Object(I.jsx)("p",{children:N}),Object(I.jsx)("h2",{children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(I.jsxs)("form",{className:q.form,onSubmit:function(e){e.preventDefault(),F(!0),_(function(e,t,r,c){return function(n){if(n(h()),!e.trim()||!t||!r){var a="\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b";return c(a),n(O({message:a,code:400,status:"idle"}))}if(localStorage.getItem(e)){var s="\u041b\u043e\u0433\u0438\u043d \u0437\u0430\u043d\u044f\u0442";return n(O({message:s,code:400,status:"idle"})),c(s)}if(t!==r){var i="\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442";return n(O({message:i,code:400,status:"idle"})),c(i)}var o={pass:t,favorites:{films:[],people:[],planets:[]},history:{films:[],people:[],planets:[]}};localStorage.setItem(e,JSON.stringify(o)),localStorage.setItem("currentUser",e);var l="\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441\u043e\u0437\u0434\u0430\u043d";n(m({login:e})),n(O({message:l,code:201,status:"idle"})),c(l)}}(r,u,f,k)),a(),d(),v(),F(!1)},children:[Object(I.jsxs)("div",{className:q.control,children:[Object(I.jsx)("label",{htmlFor:"login",children:"\u041b\u043e\u0433\u0438\u043d"}),Object(I.jsx)("input",{type:"text",required:!0,value:r,onChange:n,id:"login"})]}),Object(I.jsxs)("div",{className:q.control,children:[Object(I.jsx)("label",{htmlFor:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(I.jsx)("input",{type:"password",required:!0,value:u,onChange:j,id:"password"})]}),Object(I.jsxs)("div",{className:q.control,children:[Object(I.jsx)("label",{htmlFor:"confirmPassword",children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(I.jsx)("input",{type:"password",required:!0,value:f,onChange:x,id:"confirmPassword"})]}),Object(I.jsx)("div",{className:q.actions,children:Object(I.jsx)("button",{disabled:C,children:"\u0413\u043e\u0442\u043e\u0432\u043e"})})]})]})}),Object(I.jsxs)("p",{style:{textAlign:"center",fontWeight:"bold"},children:["\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?",Object(I.jsx)(i.b,{to:"signin",style:{color:"darkblue",fontWeight:"bold"},children:"\xa0\xa0\u0412\u043e\u0439\u0442\u0438"})]})]})}var A={categoryListItemLink:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435",films:{categoryHeader:"\u0421\u043f\u0438\u0441\u043e\u043a \u0444\u0438\u043b\u044c\u043c\u043e\u0432"},people:{categoryHeader:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0435\u0439"},planets:{categoryHeader:"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043b\u0430\u043d\u0435\u0442"}},U=function(e,t,r){var c,n=r.id,a=r.url;return null===(c=e.catalog.cache.items[t])||void 0===c?void 0:c.find((function(e){return n?Number(e.id)===Number(n):e.url===a}))},J=function(e){return[e.catalog.status,e.catalog.error]},T=r(7),W=r.n(T),R=r(14),M={base:"https://swapi.dev/api/",films:"films/",people:"people/",planets:"planets/",species:"species/",starships:"starships/",vehicles:"vehicles/"},V="https://starwars-visualguide.com/assets/img/",G="".concat(V).concat("characters"),P="".concat(V).concat("planets"),B="".concat(V).concat("films"),D=".jpg",K=r(30),Q=r.n(K),Y={films:{method:"description"},people:{method:"specificationsList",fields:["birthYear","height","eyeColor"]},planets:{method:"specificationsList",fields:["climate","diameter","terrain"]},default:{method:"specificationsList",fields:[]}},Z=function(e){for(var t={},r=0,c=Object.entries(e);r<c.length;r++){var n=c[r];t[Q()(n[0])]=n[1]}var a=e.url.split("/");return t.id=a[5],t.type=a[4],t.title=t.title||t.name,t.view=Y[t.type]||Y.default,t},z=function(){var e=Object(R.a)(W.a.mark((function e(t){var r,c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("".concat(r.status," ").concat(r.statusText));case 5:return e.next=7,r.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(R.a)(W.a.mark((function e(t){var r;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:return r=e.sent,e.abrupt("return",Z(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(R.a)(W.a.mark((function e(t){var r,c,n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:if(r=e.sent,c=r.results,null===r.next){e.next=9;break}return e.next=7,$(r.next);case 7:n=e.sent,c=[].concat(Object(u.a)(c),Object(u.a)(n));case 9:return e.abrupt("return",c.map((function(e){return Z(e)})));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=Object(j.b)("catalog/fetchCatalogCategory",function(){var e=Object(R.a)(W.a.mark((function e(t,r){var c,n,a;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.rejectWithValue,n="".concat(M.base).concat(M[t]),e.prev=2,e.next=5,$(n);case 5:return a=e.sent,e.abrupt("return",{type:t,result:a});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",c(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,r){return e.apply(this,arguments)}}()),te=Object(j.b)("catalog/fetchCatalogItem",function(){var e=Object(R.a)(W.a.mark((function e(t,r){var c,n,a,s,i,o;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.type,n=t.id,a=t.url,s=r.rejectWithValue,(i=a||"".concat(M.base,"/").concat(c,"/").concat(n))||s("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u0432\u0445\u043e\u0434\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),e.prev=4,e.next=7,X(i);case 7:return o=e.sent,c=c||o.type,e.abrupt("return",{type:c,result:o});case 12:return e.prev=12,e.t0=e.catch(4),e.abrupt("return",s(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,r){return e.apply(this,arguments)}}());function re(){return Object(I.jsx)("div",{className:"loading-message",children:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f..."})}function ce(e){var t=e.error;return Object(I.jsxs)("div",{className:"error-message",children:["\u041e\u0448\u0438\u0431\u043a\u0430: ",t||"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"]})}var ne=function(e){var t=e.id,r=e.type,c=e.title;return Object(I.jsxs)("div",{className:"category-item",children:[Object(I.jsx)("h3",{children:c}),Object(I.jsx)(i.b,{to:"/catalog/".concat(r,"/").concat(t),children:A.categoryListItemLink})]})},ae=function(e){var t=e.type,r=Object(o.c)((function(e){return function(e,t){return e.catalog.cache.listItems[t]}(e,t)}))||[];return Object(I.jsx)("div",{className:"catalog-grid",children:r.map((function(e){return Object(I.jsx)(ne,{id:e.id,type:e.type,title:e.title},e.id)}))})},se=function(){var e,t=Object(l.h)().type,r=Object(o.c)(J),n=Object(H.a)(r,2),a=n[0],s=n[1],i=Object(o.b)();return Object(c.useEffect)((function(){i(ee(t))}),[t,i]),Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("div",{className:"body",children:[Object(I.jsx)("h1",{children:null===(e=A[t])||void 0===e?void 0:e.categoryHeader}),"loading"===a&&Object(I.jsx)(re,{}),s&&Object(I.jsx)(ce,{error:s}),Object(I.jsx)(ae,{type:t})]})})},ie=function(e){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("p",{className:"episode-num",children:["Episode ",e.episodeId]}),Object(I.jsx)("div",{className:"opening",children:e.openingCrawl})]})},oe=r(31),le=r.n(oe),ue=r(15),je=r.n(ue),de=function(e){var t=le()(e).split("-");return t[0]=je()(t[0]),t.join(" ")},be=function(e){var t=e.specifications.map((function(e){return Object(I.jsxs)("div",{children:[Object(I.jsx)("dt",{className:"specification-name",children:"".concat(de(e.name),":")}),Object(I.jsx)("dd",{className:"specification-value",children:e.value}),Object(I.jsx)("br",{})]},e.name)}));return Object(I.jsx)("dl",{className:"person-specifications",children:t})};function pe(e){return"".concat(P,"/").concat(e).concat(D)}function he(e){return"".concat(B,"/").concat(e).concat(D)}function fe(e){var t,r=e.type,c=e.id,n=Object(o.c)((function(e){return U(e,r,{id:c})})),a=Object(o.b)(),s=Object(o.c)((function(e){return e.auth.user.userName})),i=Object(o.c)((function(e){return e.auth.favorites}))[r].findIndex((function(e){return e.itemId==="".concat(c)})),l=-1!==i,u=function(e){a(function(e,t,r,c){return function(n){n(h());var a=localStorage.getItem(e);a=JSON.parse(a);var s={itemId:r,title:c};a.favorites[t].push(s),localStorage.setItem(e,JSON.stringify(a)),n(v({type:t,itemObj:s=[s]})),n(f())}}(s,r,c,e))};return n?Object(I.jsxs)("div",{className:"single-".concat(r),children:[Object(I.jsx)("h1",{children:n.title}),"description"===n.view.method&&Object(I.jsx)(ie,{episodeId:n.episodeId,openingCrawl:n.openingCrawl}),"specifications"===n.view.method&&Object(I.jsx)(be,{specifications:n.view.fields.map((function(e){return{name:e,value:n[e]}}))}),Object(I.jsx)("div",{className:"catalog-image",children:Object(I.jsx)("img",{src:"people"===r?(t=c,"".concat(G,"/").concat(t).concat(D)):"films"===r?he(c):pe(c),alt:n.title||n.name})}),!l&&Object(I.jsx)("button",{className:"favorite-button",onClick:function(){return u(n.title||n.name)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),l&&Object(I.jsx)("button",{className:"favorite-button",onClick:function(){a(function(e,t,r){return function(c){c(h());var n=localStorage.getItem(e);(n=JSON.parse(n)).favorites[t].splice(r,1),localStorage.setItem(e,JSON.stringify(n)),c(g({type:t,index:r})),c(f())}}(s,r,i))},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e"})]}):Object(I.jsx)("div",{className:"single-".concat(r),children:"\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435"})}function Oe(){var e=Object(l.h)(),t=e.type,r=e.id,n=Object(o.c)(J),a=Object(H.a)(n,2),s=a[0],i=a[1],u=Object(o.b)();return Object(c.useEffect)((function(){u(function(e){var t=e.type,r=e.id,c=e.url;return function(e,n){U(n(),t,{id:r,url:c})||e(te({type:t,id:r,url:c}))}}({id:r,type:t}))}),[r,t,u]),Object(I.jsxs)("div",{className:"body",children:["loading"===s&&Object(I.jsx)(re,{}),i&&Object(I.jsx)(ce,{error:i}),Object(I.jsx)(fe,{id:r,type:t})]})}var me=r(32),xe=["films","people","planets"],ve=function(){var e=Object(R.a)(W.a.mark((function e(t,r){var c,n,a,s,i,o;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r.rejectedWithValue,t){e.next=3;break}return e.abrupt("return",null);case 3:n=[],a=Object(me.a)(xe),e.prev=5,a.s();case 7:if((s=a.n()).done){e.next=22;break}return i=s.value,o=void 0,e.prev=10,e.next=13,$("".concat(M.base).concat(M[i],"?search=").concat(t));case 13:o=e.sent,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),c(e.t0);case 19:o.length>0&&(n=[].concat(Object(u.a)(n),[{type:i,results:o}]));case 20:e.next=7;break;case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(5),a.e(e.t1);case 27:return e.prev=27,a.f(),e.finish(27);case 30:return e.abrupt("return",n);case 31:case"end":return e.stop()}}),e,null,[[5,24,27,30],[10,16]])})));return function(t,r){return e.apply(this,arguments)}}(),ge=Object(j.b)("search/fetchResults",ve),ye=function(e){return e.search.results},Ne=function(e){return e.search.query},ke=function(e){return[e.search.status,e.search.error]};function Se(){return Object(I.jsx)("div",{className:"loading-message",children:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f..."})}function we(e){var t=e.error;return Object(I.jsxs)("div",{className:"error-message",children:["\u041e\u0448\u0438\u0431\u043a\u0430: ",t||"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"]})}var Ie=function(e){e.status="loading",e.error=null},Ce=function(e,t){e.status="idle",e.error=t||"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430"},Fe=function(e){e.status="idle",e.error=null},He=Object(j.c)({name:"search",initialState:{query:"",results:[],status:"idle",error:null},reducers:{setSearchQuery:function(e,t){e.query=t.payload}},extraReducers:function(e){e.addCase(ge.pending,(function(e){Ie(e)})).addCase(ge.fulfilled,(function(e,t){var r=t.payload;Fe(e),e.results=r||[]})).addCase(ge.rejected,(function(e,t){var r=t.payload;Ce(e,r)}))}}),Le=He.reducer,qe=He.actions.setSearchQuery,_e=function(e){var t=Object(c.useState)(e.initialValue),r=Object(H.a)(t,2),n=r[0],a=r[1],s=function(e,t){var r=Object(c.useState)(e),n=Object(H.a)(r,2),a=n[0],s=n[1];return Object(c.useEffect)((function(){var r=setTimeout((function(){s(e)}),t);return function(){clearTimeout(r)}}),[e,t]),a}(n,700),i=Object(o.b)();return Object(c.useEffect)((function(){i(qe(s))}),[s,i]),Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("form",{onSubmit:function(t){return e.submitHandler(t,n)},children:[Object(I.jsx)("input",{className:"search-input",onChange:function(e){return function(e){a(e.target.value)}(e)},type:"text",name:"search",value:n}),Object(I.jsx)("button",{className:"search-button",type:"submit",children:"\u041f\u043e\u0438\u0441\u043a"})]})})},Ee=function(e){var t=e.resultsEntry.results.map((function(t){var r="/catalog/".concat(t.type,"/").concat(t.id),c=t.id,n=t.title,a=t.type;return Object(I.jsx)("li",{children:Object(I.jsx)(i.b,{onClick:function(){return e.resultLinkClickHandler(a,{id:c,title:n})},to:r,children:n})},r)}));return Object(I.jsxs)("div",{className:"search-column",children:[Object(I.jsxs)("h2",{children:[je()(e.resultsEntry.type),":"]}),Object(I.jsx)("ul",{children:t})]})},Ae=function(e){var t=Object(o.c)(ye).map((function(t){return t&&Object(I.jsx)(Ee,{resultsEntry:t,resultLinkClickHandler:e.resultLinkClickHandler},t.type)}));return Object(I.jsx)(I.Fragment,{children:t})},Ue=function(){var e=function(e){var t=new URLSearchParams(Object(l.g)().search);return e.map((function(e){return t.get(e)}))}(["search"]),t=Object(H.a)(e,1)[0],r=Object(o.c)(ke),n=Object(H.a)(r,2),a=n[0],s=n[1],i=Object(o.c)(Ne),u=Object(c.useState)({isRedirect:!1,query:""}),j=Object(H.a)(u,2),d=j[0],b=d.isRedirect,p=d.query,O=j[1],m=Object(o.c)((function(e){return e.auth.user.userName})),x=Object(o.c)((function(e){return e.auth.history})),v=Object(o.b)();Object(c.useEffect)((function(){v(ge(i))}),[t,i,v]);var g=function(e,t){e.preventDefault(),O({isRedirect:!0,query:t})},y=Object(c.useCallback)((function(e,t){""!==m&&(x[e].find((function(e){return e.id==="".concat(t.id)}))||v(function(e,t,r){return function(c){c(h());var n=localStorage.getItem(e);(n=JSON.parse(n)).history[t].push(r),localStorage.setItem(e,JSON.stringify(n)),c(N({type:t,queryObj:r=[r]})),c(f())}}(m,e,t)))}),[x,m,v]);return Object(I.jsxs)(I.Fragment,{children:[Object(c.useMemo)((function(){return Object(I.jsx)(I.Fragment,{children:b&&Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(l.a,{push:!0,to:{pathname:"/search",search:"?search=".concat(p)}})})})}),[b,p]),Object(I.jsxs)("div",{className:"search-container",children:[Object(c.useMemo)((function(){return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)("div",{className:"search-header",children:Object(I.jsx)(_e,{initialValue:t||"",submitHandler:g})})})}),[t]),Object(c.useMemo)((function(){return Object(I.jsxs)("div",{className:"search-body",children:["loading"===a&&Object(I.jsx)(Se,{}),s&&Object(I.jsx)(we,{error:s}),Object(I.jsx)(Ae,{resultLinkClickHandler:y})]})}),[a,s,y])]})]})};function Je(){return Object(I.jsxs)("div",{className:"body",children:[Object(I.jsx)("div",{className:"main-head",children:Object(I.jsx)("h2",{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430:"})}),Object(I.jsx)(Ue,{})]})}var Te=function(e){var t=e.list.map((function(t){return Object(I.jsx)("li",{children:Object(I.jsx)(i.b,{to:"/catalog/".concat(e.type,"/").concat(t.itemId),children:t.title})},"".concat(e.type,"/").concat(t.itemId))}));return Object(I.jsxs)("div",{className:"favorites-column",children:[Object(I.jsxs)("h2",{children:[je()(e.type),":"]}),Object(I.jsx)("ul",{children:t})]})};function We(){var e=Object(o.c)((function(e){return e.auth.favorites})),t=e.films,r=e.people,c=e.planets;return Object(I.jsx)("div",{className:"body",children:Object(I.jsxs)("div",{className:"favorites-container",children:[Object(I.jsx)("div",{className:"main-head",children:Object(I.jsx)("h1",{children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"})}),Object(I.jsxs)("div",{className:"favorites-body",children:[t.length>0&&Object(I.jsx)(Te,{list:t,type:"films"},"films"),r.length>0&&Object(I.jsx)(Te,{list:r,type:"people"},"people"),c.length>0&&Object(I.jsx)(Te,{list:c,type:"planets"},"planets")]})]})})}var Re=function(e){var t=e.type,r=e.list.map((function(e){var r=e.id,c="/catalog/".concat(t,"/").concat(r),n=e.title;return Object(I.jsx)("li",{children:Object(I.jsx)(i.b,{to:c,children:n})},c)}));return Object(I.jsxs)("div",{className:"history-column",children:[Object(I.jsxs)("h2",{children:[je()(t),":"]}),Object(I.jsx)("ul",{children:r})]})};function Me(){var e=Object(o.c)((function(e){return e.auth.history})),t=e.films,r=e.people,c=e.planets;return Object(I.jsx)("div",{className:"body",children:Object(I.jsxs)("div",{className:"history-container",children:[Object(I.jsx)("div",{className:"main-head",children:Object(I.jsx)("h1",{children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u043f\u043e\u0438\u0441\u043a\u0430"})}),Object(I.jsxs)("div",{className:"history-body",children:[t.length>0&&Object(I.jsx)(Re,{list:t,type:"films"},"films"),r.length>0&&Object(I.jsx)(Re,{list:r,type:"people"},"people"),c.length>0&&Object(I.jsx)(Re,{list:c,type:"planets"},"planets")]})]})})}function Ve(){return Object(I.jsxs)("div",{className:"body",children:[Object(I.jsx)("h1",{style:{color:"red"},children:"404 - Not Found!"}),Object(I.jsx)(i.b,{style:{color:"blue"},to:"/",children:Object(I.jsx)("h3",{children:"Go Home"})})]})}var Ge=r(17),Pe=r(25),Be=["component"];function De(e){var t=e.component,r=Object(Pe.a)(e,Be),c=Object(o.c)((function(e){return e.auth.user})).userIsLogged;return Object(I.jsx)(l.b,Object(Ge.a)(Object(Ge.a)({},r),{},{render:function(e){return c?Object(I.jsx)(t,Object(Ge.a)({},e)):Object(I.jsx)(l.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))}var Ke=["component"];function Qe(e){var t=e.component,r=Object(Pe.a)(e,Ke),c=Object(o.c)((function(e){return e.auth.user})).userIsLogged;return Object(I.jsx)(l.b,Object(Ge.a)(Object(Ge.a)({},r),{},{render:function(e){return c?Object(I.jsx)(l.a,{to:{pathname:"/",state:{from:e.location}}}):Object(I.jsx)(t,Object(Ge.a)({},e))}}))}function Ye(){return Object(I.jsxs)("div",{className:"footer",children:[Object(I.jsx)("span",{style:{color:"white"},children:"Alexander Bosikov :"}),Object(I.jsx)("a",{className:"link",href:"https://t.me/ArtificialMan",rel:"noreferrer",target:"_blank",children:"TELEGRAM"}),Object(I.jsx)("a",{className:"link",href:"https://github.com/ArtificialMan3000",rel:"noreferrer",target:"_blank",children:"GITHUB"}),Object(I.jsx)("span",{style:{margin:"5rem",color:"white"},children:"&&"}),Object(I.jsx)("span",{style:{color:"white"},children:"Nikita Alekseev :"}),Object(I.jsx)("a",{className:"link",href:"https://vk.com/parenizmetro",rel:"noreferrer",target:"_blank",children:"VK"}),Object(I.jsx)("a",{className:"link",href:"https://github.com/Nik-Ark",rel:"noreferrer",target:"_blank",children:"GITHUB"})]})}function Ze(){var e=Object(o.c)((function(e){return e.auth.user})),t=e.userIsLogged,r=e.userName,c=Object(l.i)();return console.log(c),Object(I.jsxs)("div",{className:"container",children:[t?Object(I.jsx)(C,{userName:r}):Object(I.jsx)(F,{}),Object(I.jsxs)(l.d,{children:[Object(I.jsx)(l.b,{exact:!0,path:"/",component:Je}),Object(I.jsx)(Qe,{exact:!0,path:"/signin",component:_}),Object(I.jsx)(Qe,{exact:!0,path:"/signup",component:E}),Object(I.jsx)(De,{exact:!0,path:"/catalog/:type",component:se}),Object(I.jsx)(De,{exact:!0,path:"/catalog/:type/:id",component:Oe}),Object(I.jsx)(De,{exact:!0,path:"/favorites",component:We}),Object(I.jsx)(De,{exact:!0,path:"/history",component:Me}),Object(I.jsx)(De,{exact:!0,path:"/search",component:Ue}),Object(I.jsx)(l.b,{exact:!0,path:"/404",component:Ve}),Object(I.jsx)(l.a,{to:"/404"})]}),Object(I.jsx)(Ye,{})]})}var ze=Object(j.c)({name:"catalog",initialState:{cache:{items:{},listItems:{}},status:"idle",error:null},reducers:{},extraReducers:function(e){e.addCase(ee.pending,(function(e){Ie(e)})).addCase(ee.fulfilled,(function(e,t){var r=t.payload,c=r.type,n=r.result;Fe(e),function(e,t,r){var c=r.map((function(e){return{id:e.id,type:e.type,title:e.title}}));e.cache.listItems[t]=c}(e,c,n)})).addCase(ee.rejected,(function(e,t){var r=t.payload;Ce(e,r)})).addCase(te.pending,(function(e){Ie(e)})).addCase(te.fulfilled,(function(e,t){var r=t.payload,c=r.type,n=r.result;Fe(e),function(e,t,r){var c=e.cache.items[t]||[];c.push(r),e.cache.items[t]=c}(e,c,n)})).addCase(te.rejected,(function(e,t){var r=t.error.message,c=t.payload;Ce(e,"".concat(r,": ").concat(c))}))}}).reducer,Xe=Object(j.a)({reducer:{auth:S,catalog:ze,search:Le}});r(43);s.a.render(Object(I.jsx)(n.a.StrictMode,{children:Object(I.jsx)(i.a,{basename:"/star-wars-fans",children:Object(I.jsx)(o.a,{store:Xe,children:Object(I.jsx)(Ze,{})})})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.26e4ae05.chunk.js.map